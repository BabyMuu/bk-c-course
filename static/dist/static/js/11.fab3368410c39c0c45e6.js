(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[11],{112:function(t,e,s){"use strict";s.r(e);var n=s(113);var a=s.n(n);for(var r in n)if(r!=="default")(function(t){s.d(e,t,function(){return n[t]})})(r);e["default"]=a.a},113:function(t,e,s){"use strict";var n=s(0);Object.defineProperty(e,"__esModule",{value:true});e.default=void 0;var a=n(s(15));var r=n(s(16));function i(t,e){var s=typeof Symbol!=="undefined"&&t[Symbol.iterator]||t["@@iterator"];if(!s){if(Array.isArray(t)||(s=o(t))||e&&t&&typeof t.length==="number"){if(s)t=s;var n=0;var a=function t(){};return{s:a,n:function e(){if(n>=t.length)return{done:true};return{done:false,value:t[n++]}},e:function t(e){throw e},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var r=true,i=false,u;return{s:function e(){s=s.call(t)},n:function t(){var e=s.next();r=e.done;return e},e:function t(e){i=true;u=e},f:function t(){try{if(!r&&s.return!=null)s.return()}finally{if(i)throw u}}}}function o(t,e){if(!t)return;if(typeof t==="string")return u(t,e);var s=Object.prototype.toString.call(t).slice(8,-1);if(s==="Object"&&t.constructor)s=t.constructor.name;if(s==="Map"||s==="Set")return Array.from(t);if(s==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(s))return u(t,e)}function u(t,e){if(e==null||e>t.length)e=t.length;for(var s=0,n=new Array(e);s<e;s++){n[s]=t[s]}return n}var l={name:"answer_question_detail",data:function t(){return{totalQuestion:{},totalScore:0,disabled:false,count:"",seconds:0,msg:"",questionList:[],questionTitle:{},answer_info:[],paper_id:0}},watch:{"$store.state.currentCourseId":function t(){this.$router.replace({name:"answer_question_index"})}},mounted:function t(){this.paper_id=this.$route.query.id;if(this.$route.query.isAccomplish){this.getStudentQuestionList()}else{this.Time();this.getPaperStatus();var e=this;setTimeout(function(){e.submitButtonDisabled()},2e3)}},methods:{getStudentQuestionList:function t(){var e=this;return(0,r.default)(a.default.mark(function t(){return a.default.wrap(function t(s){while(1){switch(s.prev=s.next){case 0:e.$http.get("/course/answer_or_check_paper/",{params:{paper_id:e.paper_id}}).then(function(t){e.totalQuestion=t.data;e.totalScore=t.data.total_score;delete e.totalQuestion["total_score"];delete e.totalQuestion["cumulative_time"];for(var s in e.totalQuestion){var n=i(e.totalQuestion[s]),a;try{for(n.s();!(a=n.n()).done;){var r=a.value;if(r.student_answer===null){r.student_answer="未作答"}}}catch(t){n.e(t)}finally{n.f()}}});case 1:case"end":return s.stop()}}},t)}))()},countDown:function t(){var e=parseInt(this.seconds/(60*60)%24);e=e<10?"0"+e:e;var s=parseInt(this.seconds/60%60);s=s<10?"0"+s:s;var n=parseInt(this.seconds%60);n=n<10?"0"+n:n;this.count=e+"时"+s+"分"+n+"秒"},Time:function t(){var e=this;setInterval(function(){e.seconds+=1;e.countDown();e.submitButtonDisabled()},1e3)},clickSavaAnswer:function t(){var e=this;this.$bkInfo({title:"确认要保存当前作答？",confirmLoading:true,confirmFn:function(){var t=(0,r.default)(a.default.mark(function t(){return a.default.wrap(function t(s){while(1){switch(s.prev=s.next){case 0:s.prev=0;s.next=3;return new Promise(function(t){setTimeout(function(){t("成功")},1500)});case 3:e.saveAnswer();return s.abrupt("return",true);case 7:s.prev=7;s.t0=s["catch"](0);console.warn(s.t0);return s.abrupt("return",false);case 11:case"end":return s.stop()}}},t,null,[[0,7]])}));function s(){return t.apply(this,arguments)}return s}()})},saveAnswer:function t(){var e=this;this.questionList.forEach(function(t){e.answer_info.push({question_id:t.id,stu_answers:t.student_answer})});console.log("answer_info",this.answer_info);this.$http.post("course/save_answer/",{paper_id:this.paper_id,answer_info:this.answer_info,save_or_submit:1,cumulative_time:this.seconds}).then(function(t){console.log(t);if(t.result===true){e.$bkMessage({message:"保存成功",theme:"success"});e.toAnswerQuestionIndex()}else{e.$bkMessage({message:"保存失败",theme:"error"})}})},clickSubmit:function t(){var e=this;this.$bkInfo({title:"确认要提交当前试卷？",confirmLoading:true,confirmFn:function(){var t=(0,r.default)(a.default.mark(function t(){return a.default.wrap(function t(s){while(1){switch(s.prev=s.next){case 0:s.prev=0;s.next=3;return new Promise(function(t){setTimeout(function(){t("成功")},1500)});case 3:e.submitAnswer();e.toAnswerQuestionIndex();return s.abrupt("return",true);case 8:s.prev=8;s.t0=s["catch"](0);console.warn(s.t0);return s.abrupt("return",false);case 12:case"end":return s.stop()}}},t,null,[[0,8]])}));function s(){return t.apply(this,arguments)}return s}()})},submitAnswer:function t(){var e=this;this.questionList.forEach(function(t){e.answer_info.push({question_id:t.id,stu_answers:t.student_answer})});console.log("answer_info",this.answer_info);this.$http.post("course/save_answer/",{paper_id:this.paper_id,answer_info:this.answer_info,save_or_submit:0,cumulative_time:this.seconds}).then(function(t){console.log(t);if(t.result===true){e.$bkMessage({message:"提交成功",theme:"success"});e.toAnswerQuestionIndex()}else{e.$bkMessage({message:"提交失败",theme:"error"})}})},toAnswerQuestionIndex:function t(){this.$router.push({name:"answer_question_index"})},lastQuestion:function t(){var e=document.querySelector(".question_lists");var s=document.querySelectorAll(".question_item");var n=s.length;var a=s[0].offsetHeight;var r=n*a;e.style.width=r+"px";var i=e.offsetTop;if(-i>0&&i<r*4){i=i+a;e.style.top=i+"px"}},nextQuestion:function t(){var e=document.querySelector(".question_lists");var s=document.querySelectorAll(".question_item");var n=s.length;var a=s[0].offsetHeight;var r=n*a;e.style.height=n*a+"px";var i=e.offsetTop;if(-i<r-280){i=i-a;e.style.top=i+"px"}},selectQuestion:function t(e){var s=document.querySelector(".question_lists");var n=document.querySelectorAll(".question_item");var a=this.questionList[0].id;var r=n[0].offsetHeight;var i=s.offsetTop;i=(a-e)*r;s.style.top=i+"px";a=e},getPaperStatus:function t(){var e=this;this.$http.get("/course/get_paper_status/",{params:{paper_id:this.paper_id}}).then(function(t){console.log("paper_status",t);if(t.data.paper_status==="RELEASE"||t.data.paper_status==="DRAFT"){e.getQuestionList()}else if(t.data.paper_status!=="RELEASE"){e.$bkMessage({message:t.message,theme:"error"});e.toAnswerQuestionIndex()}})},getQuestionList:function t(){var e=this;this.$http.get("/course/answer_or_check_paper/",{params:{paper_id:this.paper_id}}).then(function(t){e.questionTitle=t.data;console.log("questList",t.data);console.log("questTitle",e.questionTitle);e.seconds=t.data.cumulative_time;for(var s in t.data){t.data[s].sort(function(t,e){return t.question_id-e.question_id});for(var n in t.data[s]){e.questionList.push(t.data[s][n])}}e.questionList.sort(function(t,e){return t.question_id-e.question_id})})},submitButtonDisabled:function t(){var e=this.questionList.some(function(t){return t.student_answer===""||t.student_answer===null||t.student_answer==="[]"});if(e===true){this.disabled=true}else if(e===false){this.disabled=false}}}};e.default=l},114:function(t,e,s){},165:function(t,e,s){"use strict";var n=s(114);var a=s.n(n);var r=a.a},188:function(t,e,s){"use strict";var n=function(){var t=this;var e=t.$createElement;var s=t._self._c||e;return t.$route.query.isAccomplish?s("div",{ref:"top",staticClass:"myWrapper"},[s("div",{staticClass:"header"},[s("h2",[t._v("总分："+t._s(t.totalScore===null?"————":t.totalScore))])]),t._v(" "),t._l(t.totalQuestion,function(e,n){return s("div",{key:n},[e.length!==0?s("div",[s("h3",[t._v(t._s(n))]),t._v(" "),t._l(e,function(n,a){return s("bk-card",{key:a,staticClass:"radio-common",attrs:{title:a+1+"."+n.question+" （"+n.score+"分）",border:false}},[n.types==="SINGLE"?s("bk-radio-group",{staticClass:"radio-common",model:{value:n.student_answer,callback:function(e){t.$set(n,"student_answer",e)},expression:"childItem.student_answer"}},[s("bk-radio",{attrs:{value:"A",disabled:true}},[t._v("\n                        A："+t._s(n.option_A)+"\n                    ")]),t._v(" "),s("bk-radio",{attrs:{value:"B",disabled:true}},[t._v("\n                        B："+t._s(n.option_B)+"\n                    ")]),t._v(" "),s("bk-radio",{attrs:{value:"C",disabled:true}},[t._v("\n                        C："+t._s(n.option_C)+"\n                    ")]),t._v(" "),s("bk-radio",{attrs:{value:"D",disabled:true}},[t._v("\n                        D："+t._s(n.option_D)+"\n                    ")])],1):t._e(),t._v(" "),n.types==="MULTIPLE"?s("bk-checkbox-group",{staticClass:"radio-common",model:{value:n.student_answer,callback:function(e){t.$set(n,"student_answer",e)},expression:"childItem.student_answer"}},[s("bk-checkbox",{attrs:{value:"A",disabled:true}},[t._v("\n                        A："+t._s(n.option_A)+"\n                    ")]),t._v(" "),s("bk-checkbox",{attrs:{value:"B",disabled:true}},[t._v("\n                        B："+t._s(n.option_B)+"\n                    ")]),t._v(" "),s("bk-checkbox",{attrs:{value:"C",disabled:true}},[t._v("\n                        C："+t._s(n.option_C)+"\n                    ")]),t._v(" "),s("bk-checkbox",{attrs:{value:"D",disabled:true}},[t._v("\n                        D："+t._s(n.option_D)+"\n                    ")]),t._v(" "),s("bk-checkbox",{attrs:{value:"E",disabled:true}},[t._v("\n                        E："+t._s(n.option_E)+"\n                    ")])],1):t._e(),t._v(" "),s("bk-divider"),t._v(" "),s("div",{staticStyle:{"margin-top":"10px"}},[t._v("\n                    你的答案："),s("span",[t._v(t._s(n.student_answer))])]),t._v(" "),s("div",{staticStyle:{"margin-top":"10px"}},[t._v("\n                    正确答案为：\n                    "),n.types==="JUDGE"?s("span",[t._v(t._s(e.answer==="false"?"F":"T"))]):s("span",[t._v(t._s(n.answer))])]),t._v(" "),s("div",{staticStyle:{"margin-top":"10px"}},[t._v("\n                    解析："),s("span",[t._v(t._s(n.explain===null?"暂无解析":n.explain))])]),t._v(" "),s("div",{staticStyle:{"margin-top":"10px"}},[t._v("\n                    得分："+t._s(n.student_score)+"\n                ")])],1)})],2):t._e()])}),t._v(" "),s("bk-button",{staticStyle:{width:"120px",position:"fixed",bottom:"120px",right:"6%","border-radius":"20px"},attrs:{theme:"primary"},on:{click:function(e){t.$refs.top.scrollTop=0}}},[t._v("\n        返回顶部\n    ")])],2):s("div",{staticClass:"wrapper"},[s("div",{staticClass:"progress"},[s("div",[s("bk-icon",{attrs:{type:"clock"}}),t._v("\n            累计答题时间："+t._s(t.count)+"\n        ")],1)]),t._v(" "),s("div",{staticClass:"answer_sheet"},[s("h3",[t._v("答题卡")]),t._v(" "),s("ul",{attrs:{id:"answer_sheet_title"}},t._l(t.questionTitle,function(e,n){return s("li",{key:n},[n!=="cumulative_time"?s("strong",[t._v(t._s(n))]):t._e(),t._v(" "),n!=="cumulative_time"?s("ul",{attrs:{id:"answer_sheet_number"}},t._l(t.questionTitle[n],function(e){return s("li",{key:e.id},[e.student_answer===""||e.student_answer===null||e.student_answer==="[]"?s("bk-button",{staticClass:"mr10 switchQuestion",attrs:{theme:"primary",type:"submit",size:"small"},on:{click:function(s){t.selectQuestion(e.id)}}},[t._v(t._s(e.id))]):e.student_answer!==""&&e.student_answer!==null&&e.student_answer!=="[]"?s("bk-button",{staticClass:"mr10 switchQuestion",attrs:{theme:"success",type:"submit",size:"small"},on:{click:function(s){t.selectQuestion(e.id)}}},[t._v(t._s(e.id))]):t._e()],1)}),0):t._e(),s("br")])}),0),t._v(" "),s("div",{staticClass:"answer_sheet_explain"},[s("hr"),t._v(" "),s("div",{staticClass:"answer_explain_button"},[s("bk-button",{staticClass:"mr10",attrs:{theme:"primary",type:"submit"}},[t._v("\n                    未完成\n                ")]),t._v(" "),s("bk-button",{staticClass:"mr10",attrs:{theme:"success",type:"submit"}},[t._v("\n                    已完成\n                ")])],1)])]),t._v(" "),s("div",{staticClass:"answer"},[s("h3",[t._v("请在此处答题")]),t._v(" "),s("div",{staticClass:"answer_area"},[s("bk-button",{staticClass:"last mr10",attrs:{theme:"default",icon:"angle-left"},on:{click:t.lastQuestion}}),t._v(" "),s("div",{staticClass:"question_box"},[s("ul",{staticClass:"question_lists"},t._l(t.questionList,function(e){return s("li",{key:e.id,staticClass:"question_item"},[t._v(t._s(e.id)+"."+t._s(e.question)+"\n                        "),e.types==="SINGLE"?s("div",[s("bk-radio-group",{model:{value:e.student_answer,callback:function(s){t.$set(e,"student_answer",s)},expression:"item.student_answer"}},[s("bk-radio",{attrs:{value:"A"}},[t._v("\n                                    A. "+t._s(e.option_A)+"\n                                ")]),t._v(" "),s("br"),t._v(" "),s("bk-radio",{attrs:{value:"B"}},[t._v("\n                                    B. "+t._s(e.option_B)+"\n                                ")]),t._v(" "),s("br"),t._v(" "),s("bk-radio",{attrs:{value:"C"}},[t._v("\n                                    C. "+t._s(e.option_C)+"\n                                ")]),t._v(" "),s("br"),t._v(" "),s("bk-radio",{attrs:{value:"D"}},[t._v("\n                                    D. "+t._s(e.option_D)+"\n                                ")]),t._v(" "),s("br")],1),t._v(" "),s("p",{staticClass:"mb5"},[t._v("我的答案："+t._s(e.student_answer))])],1):e.types==="MULTIPLE"?s("div",[s("bk-checkbox-group",{model:{value:e.student_answer,callback:function(s){t.$set(e,"student_answer",s)},expression:"item.student_answer"}},[s("bk-checkbox",{attrs:{value:"A"}},[t._v("A. "+t._s(e.option_A))]),t._v(" "),s("br"),t._v(" "),s("bk-checkbox",{attrs:{value:"B"}},[t._v("B. "+t._s(e.option_B))]),t._v(" "),s("br"),t._v(" "),s("bk-checkbox",{attrs:{value:"C"}},[t._v("C. "+t._s(e.option_C))]),t._v(" "),s("br"),t._v(" "),s("bk-checkbox",{attrs:{value:"D"}},[t._v("D. "+t._s(e.option_D))]),t._v(" "),s("br"),t._v(" "),s("bk-checkbox",{attrs:{value:"E"}},[t._v("E. "+t._s(e.option_E))]),t._v(" "),s("br")],1),t._v(" "),s("p",{staticClass:"mb5"},[t._v("我的答案："+t._s(e.student_answer))])],1):e.types==="JUDGE"?s("div",[s("bk-radio-group",{model:{value:e.student_answer,callback:function(s){t.$set(e,"student_answer",s)},expression:"item.student_answer"}},[s("bk-radio",{attrs:{value:"T"}},[t._v("\n                                    T. 正确\n                                ")]),t._v(" "),s("br"),t._v(" "),s("bk-radio",{attrs:{value:"F"}},[t._v("\n                                    F. 错误\n                                ")]),t._v(" "),s("br")],1),t._v(" "),s("p",{staticClass:"mb5"},[t._v("我的答案："+t._s(e.student_answer))])],1):e.types==="COMPLETION"?s("div",[s("div",{staticClass:"input-answer"},[s("bk-input",{attrs:{placeholder:"请输入你的答案",type:"textarea",rows:3,maxlength:255},model:{value:e.student_answer,callback:function(s){t.$set(e,"student_answer",s)},expression:"item.student_answer"}})],1),t._v(" "),s("p",{staticClass:"mb5"},[t._v("我的答案："+t._s(e.student_answer))])]):e.types==="SHORT_ANSWER"?s("div",[s("div",{staticClass:"input-answer"},[s("bk-input",{attrs:{placeholder:"请输入你的答案",type:"textarea",rows:3,maxlength:255},model:{value:e.student_answer,callback:function(s){t.$set(e,"student_answer",s)},expression:"item.student_answer"}})],1),t._v(" "),s("p",{staticClass:"mb5"},[t._v("我的答案："+t._s(e.student_answer))])]):t._e()])}),0)]),t._v(" "),s("bk-button",{staticClass:"next",attrs:{theme:"default",icon:"angle-right"},on:{click:t.nextQuestion}})],1),t._v(" "),s("div",{staticClass:"answer_submit"},[s("hr"),t._v(" "),s("div",{staticClass:"answer_submit_button"},[s("bk-button",{staticClass:"mr10",attrs:{theme:"primary",type:"submit",title:"基础按钮"},on:{click:t.clickSavaAnswer}},[t._v("\n                    保存\n                ")]),t._v(" "),s("bk-button",{ref:"submit",staticClass:"mr10",attrs:{theme:"primary",disabled:t.disabled,type:"submit",title:"基础按钮"},on:{click:t.clickSubmit}},[t._v("\n                    提交\n                ")])],1)])])])};var a=[];s.d(e,"a",function(){return n});s.d(e,"b",function(){return a})},82:function(t,e,s){"use strict";s.r(e);var n=s(188);var a=s(112);for(var r in a)if(r!=="default")(function(t){s.d(e,t,function(){return a[t]})})(r);var i=s(165);var o=s(2);var u=Object(o["a"])(a["default"],n["a"],n["b"],false,null,"64f2bf55",null);e["default"]=u.exports}}]);